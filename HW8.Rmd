---
title: "HW8"
author: "Jenny Qin"
date: "4/16/2020"
output: html_document
---

```{r}

library(fGarch)
source("Igarch.R")
da <- read.table("d-ge9808.txt",header = T)
ret <-da[,2]
log_ret <- log(1+ret)
log_ret <- -(log_ret)

# tail probability is 0.01
# compute VaR for 1 day horizon and 15 horizon

m1 = garchFit(~arma(2,0)+garch(1,1),data=log_ret,trace=F)
summary(m1)
```

```{r}
m2= garchFit(~garch(1,1),data=log_ret,trace=F)
summary(m2)
plot(m2, which =11)
```

```{r}
predict(m2, 15)
```
```{r}
VaR1n = -0.000393 + qnorm(1-0.01)*0.04962843	
VaR1n15d = sum(c(-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393))+ qnorm(1-0.01) * sqrt(sum(c(0.04962843^2,0.04967866^2,0.04972892^2,0.04977922^2,0.04982956^2,0.04987994^2,0.04993036^2,0.04998083^2,0.05003133^2,0.05008187^2,0.04996336^2,0.05001403^2,0.05006474^2,0.05011549^2,0.05016628^2,0.05013246^2,0.05018308^2,0.05023374^2,0.05028445^2,0.05033519^2)))
print(c(VaR1n, VaR1n15d))
```
```{r}
m4 = garchFit(~arma(2,0)+garch(1,1),data=log_ret,trace=F,cond.dist = c("std"))
summary(m4)

```

```{r}
m3= garchFit(~garch(1,1),data=log_ret,trace=F, cond.dist = c("std"))
summary(m3)
predict(m3,15)
m3
```

```{r}
VaR1t = - 0.000236 + qt(1-0.01,8)/sqrt(8/6)*0.04929281
VaR1t15d = sum(c(-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393,-0.000393))+ qt(1-0.01,8)/sqrt(8/6) * sqrt(sum(c(0.04929281^2,0.04931844^2,0.04934406^2,0.0493697^2,0.04939534^2,0.04942099^2,0.04944665^2,0.04947232^2,0.04949799^2,0.04952367^2,0.04954935^2,0.04957505^2,0.04960075^2,0.04962646^2,0.04965218^2)))
print(c(VaR1t, VaR1t15d))

```



